<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link type="text/css" rel="stylesheet" href="styles/root.css">
    <link type="text/css" rel="stylesheet" href="styles/styles.css">    
    <script src="app.js" type="module"></script>
    <script type="module" defer>
        import { init } from "./lib/templating.js";
        init();
    </script> 
</head>
<body>
    <main class="kanban">
        <div class="container">
            <section class="column">
                <h4 class="column__title">To-Do</h4>
                <div class="column__content">
                    <div class="column__card-list">

                    </div>
                    <div class="column__actions column__actions_card">
                        <div class="column__textarea">
                            <textarea class="dialog dialog_card" placeholder="Enter name"></textarea>
                        </div>
                        <div class="buttons">
                        <button class="open-dialog-button js-open-dialog">Add new card</button>
                        </div>
                    </div>
                </div>
            </section>
            <section class="column">
                <h4 class="column__title">In Progress</h4>
                <div class="column__content">
                    <div class="column__card-list">
                        <p class="card">In Progress Karte 1</p>
                    </div>
                    <div class="column__actions column__actions_card">
                        <div class="column__textarea">
                            <textarea class="dialog dialog_card" placeholder="Enter a name"></textarea>
                        </div>
                        <div class="buttons">
                            <button class="open-dialog-button js-open-dialog">Add new card</button>
                        </div>
                    </div>
                </div>
            </section>
            <section class="column">
                <h4 class="column__title">Done</h4>
                <div class="column__content">
                    <div class="column__card-list">
                        <p class="card">Done Karte 1</p>
                        <p class="card">Done Karte 2</p>
                        <p class="card">Done Karte 3</p>
                    </div>
                    <div class="column__actions column__actions_card">
                        <div class="column__textarea">
                            <textarea class="dialog dialog_card" placeholder="Enter a name"></textarea>
                        </div>
                        <div class="buttons">
                            <button class="open-dialog-button js-open-dialog">Add new card</button>
                        </div>
                    </div>
                </div>
            </section>            
            <!--
            <section class="column">
                <div class="column__actions column__actions_column">
                    <div class="column__input">
                        <input class="dialog dialog_column" placeholder="Enter Column name">
                    </div>
                    <div class="buttons">
                        <svg class="buttons__icon js-close-dialog" width="15" height="15" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M14.141 6.641H8.36V.86A.88.88 0 0 0 7.5 0a.88.88 0 0 0-.859.859V6.64H.86A.88.88 0 0 0 0 7.5c0 .458.4.859.859.859H6.64v5.782c0 .458.401.859.859.859a.88.88 0 0 0 .859-.859V8.36h5.782A.88.88 0 0 0 15 7.5a.88.88 0 0 0-.859-.859z" fill="#6B808C"/>
                        </svg>
                        <span class="button__icon"></span>
                        <button class="open-dialog-button js-open-dialog">
                            Add another Column
                        </button>
                        <button class="add-button js-add-column-title">
                            Add another Column
                        </button>
                    </div>
                </div>
            </section> -->
        </div>
    </main>

<!--<ul>
        <template data-template-foreach="loadList" data-template-let="items">
            <li>
                <h3>{{ items.beschreibung}}</h3>
                <button>test</button>
                <script type="module">
                    import { append } from "./lib/templating.js";
                    scope.querySelector("button")
                        .addEventListener("click", () => {append(document.querySelector("#form"), { items });
                                                            console.log(items);});
                </script>
                <!-TODO->
            </li>
        </template>
    </ul>
    <template id="form">
        <form>
            <div>
                <textarea></textarea>
                <button type="submit">add</button>
                <button type="reset">reset</button>
            </div>
            <script type="module">
                import { init } from "./lib/templating.js";
                scope.addEventListener("submit", async (event) => {
                    event.preventDefault();
                    const beschreibung = scope.querySelector("textarea").value;
                    const itemId = await fetch("/api/id").then(r => r.text());
                    const item = {
                        id: itemId,
                        beschreibung: `${beschreibung}: ${items.id}`,
                    };
                    await fetch("/api/list", {
                        method: "POST",
                        body: JSON.stringify(item),
                        headers: {'Content-Type': 'application/json'}
                    });
                    scope.remove();
                    init();
                });
                scope.addEventListener("reset", () => scope.remove())
            </script>
    </template> -->
</body>
</html>